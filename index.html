<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Easy PACS by mehmetsen80</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Easy PACS</h1>
      <h2 class="project-tagline">Easiest way to store dicom files. A new open-source dicom listener PACS Server build with DCM4CHE tools</h2>
      <a href="https://github.com/mehmetsen80/EasyPACS" class="btn">View on GitHub</a>
      <a href="https://github.com/mehmetsen80/EasyPACS/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/mehmetsen80/EasyPACS/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h3>
<a id="welcome-to-easypacs" class="anchor" href="#welcome-to-easypacs" aria-hidden="true"><span class="octicon octicon-link"></span></a>Welcome to EasyPACS.</h3>

<p>Easy PACS allows you to setup a PACS Server which you can view your dicom images online. It uses DCM4CHE tools with the latest frameworks such as Spring Boot and Gradle Build Environment. No need to setup a server anymore, the jar file is the file you only need and it contains the web-server itself. Thanks to Spring Boot, it enables the jar file to become both a listener (server) and web at the same time. </p>

<h3>
<a id="download" class="anchor" href="#download" aria-hidden="true"><span class="octicon octicon-link"></span></a>Download</h3>

<p>Download <a href="https://s3-us-west-2.amazonaws.com/easypacs/easy.pacs-0.0.1-SNAPSHOT.jar">easy-pacs-0-0-1-snapshot.jar</a>
You can run your jar file with any 32 bit support wrapper. Your EasyPACS server will listen the ports 104, 1111, 2222, 3333 for your incoming dicom files. You can enter your dicom server via <strong>http://localhost:8085/</strong>  </p>

<h3>
<a id="object-model" class="anchor" href="#object-model" aria-hidden="true"><span class="octicon octicon-link"></span></a>Object Model</h3>

<p>The server accepts all the dicom files and produces all the required database entities. The dicom entities are generated with JPA related entities such as <em><strong>Patient, Study, Series, Equipment and Instance</strong></em>.  </p>

<h3>
<a id="database-is-mysql" class="anchor" href="#database-is-mysql" aria-hidden="true"><span class="octicon octicon-link"></span></a>Database is MYSQL</h3>

<p>Please run the below sql queries to generate your tables</p>

<pre><code>CREATE TABLE tbl_patient (pkTBLPatientID BIGINT AUTO_INCREMENT NOT NULL, createdDate DATETIME, modifiedDate DATETIME, patientAge VARCHAR(5), patientBirthday DATE, patientID VARCHAR(50), patientName VARCHAR(50), patientSex VARCHAR(2), PRIMARY KEY (pkTBLPatientID))
CREATE TABLE tbl_study (pkTBLStudyID BIGINT AUTO_INCREMENT NOT NULL, accessionNumber VARCHAR(20), additionalPatientHistory VARCHAR(100), admittingDiagnosesDescription VARCHAR(50), createdDate DATETIME, modifiedDate DATETIME, referringPhysicianName VARCHAR(50), studyDateTime DATETIME, studyDescription VARCHAR(200), studyID VARCHAR(50), studyInstanceUID VARCHAR(100), studyPriorityID VARCHAR(20), studyStatusID VARCHAR(20), pkTBLPatientID BIGINT, PRIMARY KEY (pkTBLStudyID))
CREATE TABLE tbl_series (pkTBLSeriesID BIGINT AUTO_INCREMENT NOT NULL, bodyPartExamined VARCHAR(20), createdDate DATETIME, laterality VARCHAR(50), modifiedDate DATETIME, operatorsName VARCHAR(30), patientPosition VARCHAR(10), protocolName VARCHAR(50), seriesDateTime DATETIME, seriesDescription VARCHAR(100), seriesInstanceUID VARCHAR(100), seriesNumber INTEGER, pkTBLStudyID BIGINT, PRIMARY KEY (pkTBLSeriesID))
CREATE TABLE tbl_equipment (pkTBLEquipmentID BIGINT AUTO_INCREMENT NOT NULL, conversionType VARCHAR(30), createdDate DATETIME, deviceSerialNumber VARCHAR(50), institutionAddress VARCHAR(50), institutionName VARCHAR(50), institutionalDepartmentName VARCHAR(50), manufacturer VARCHAR(50), manufacturerModelName VARCHAR(50), modality VARCHAR(30), modifiedDate DATETIME, softwareVersion VARCHAR(50), stationName VARCHAR(30), pkTBLSeriesID BIGINT, PRIMARY KEY (pkTBLEquipmentID))
CREATE TABLE tbl_instance (pkTBLInstanceID BIGINT AUTO_INCREMENT NOT NULL, acquisitionDateTime DATETIME, contentDateTime DATETIME, createdDate DATETIME, exposureTime INTEGER, imageOrientation VARCHAR(20), imagePosition VARCHAR(50), imageType VARCHAR(20), instanceNumber INTEGER, kvp VARCHAR(20), mediaStorageSopInstanceUID VARCHAR(100), modifiedDate DATETIME, patientOrientation VARCHAR(20), pixelSpacing FLOAT, sliceLocation FLOAT, sliceThickness FLOAT, sopClassUID VARCHAR(100), sopInstanceUID VARCHAR(100), transferSyntaxUID VARCHAR(100), windowCenter VARCHAR(20), windowWidth VARCHAR(20), xrayTubeCurrent INTEGER, pkTBLSeriesID BIGINT, PRIMARY KEY (pkTBLInstanceID))
ALTER TABLE tbl_study ADD CONSTRAINT FK_tbl_study_pkTBLPatientID FOREIGN KEY (pkTBLPatientID) REFERENCES tbl_patient (pkTBLPatientID)
ALTER TABLE tbl_series ADD CONSTRAINT FK_tbl_series_pkTBLStudyID FOREIGN KEY (pkTBLStudyID) REFERENCES tbl_study (pkTBLStudyID)
ALTER TABLE tbl_equipment ADD CONSTRAINT FK_tbl_equipment_pkTBLSeriesID FOREIGN KEY (pkTBLSeriesID) REFERENCES tbl_series (pkTBLSeriesID)
ALTER TABLE tbl_instance ADD CONSTRAINT FK_tbl_instance_pkTBLSeriesID FOREIGN KEY (pkTBLSeriesID) REFERENCES tbl_series (pkTBLSeriesID)
</code></pre>

<h3>
<a id="easy-pacs-dicom-logic" class="anchor" href="#easy-pacs-dicom-logic" aria-hidden="true"><span class="octicon octicon-link"></span></a>Easy PACS Dicom Logic</h3>

<p>Dicom entity structure is known as:</p>

<pre><code>Patient --&gt; NxStudy --&gt; MxSeries --&gt; ZxInstances 
Series --&gt; Equipment
1 Patient can contain N of Studies, 
1 Study can contain M of Series
1 Series can contain Z of Instances
1 Series can contain 1 Equipment
</code></pre>

<h3>
<a id="entity-diagram" class="anchor" href="#entity-diagram" aria-hidden="true"><span class="octicon octicon-link"></span></a>Entity Diagram</h3>

<p><img src="https://2kere2beseder.files.wordpress.com/2015/04/easypacsorm_final.jpg" alt="Easy PACS Entity Diagram"></p>

<h3>
<a id="how-to-setup-java-environment" class="anchor" href="#how-to-setup-java-environment" aria-hidden="true"><span class="octicon octicon-link"></span></a>How to Setup Java Environment</h3>

<p>Java platform is tricky. It uses 32 bit Java environment along with needed <em>**clib</em>**_ files to enable the image file conversions</p>

<ol>
<li>Put 32 bit  <a href="https://2kere2beseder.files.wordpress.com/2015/04/clib_files.zip">clib_jiio.dll, clib_jiio_sse2.dll, clib_jiio_util.dll</a> dll files under C:\Program Files (x86)\Java\jre1.8.0_20\bin</li>
<li>Put <a href="https://2kere2beseder.files.wordpress.com/2015/04/clib_files.zip">clibwrapper_jiio.jar, jai_imageio.jar</a> jar files under  C:\Program Files (x86)\Java\jdk1.8.0_45\jre\lib\ext\</li>
</ol>

<h3>
<a id="environmental-variables" class="anchor" href="#environmental-variables" aria-hidden="true"><span class="octicon octicon-link"></span></a>Environmental Variables:</h3>

<p>Make sure that your Environmental Variables are setup correctly</p>

<pre><code>User Defined
Variable Name:  JAVA_HOME
Variable Value: C:\Program Files (x86)\Java\jdk1.8.0_20
</code></pre>

<pre><code>System variables
Variable Name:  CLASSPATH
Variable Value: %JAVA_HOME%\jre\bin:
</code></pre>

<h2>
<a id="easy-pacs-as-a-windows-service" class="anchor" href="#easy-pacs-as-a-windows-service" aria-hidden="true"><span class="octicon octicon-link"></span></a>Easy PACS as a Windows Service</h2>

<p>We use Tanuki Windows Wrapper to run Easy PACS as a server. Please follow these steps carefully
1. Download  and unzip it under C: drive  i.e: <em><strong>C:\EasyPACSService</strong></em></p>

<ul>
<li>You will see the following EasyPACS Service Folder Structure 
<img src="https://2kere2beseder.files.wordpress.com/2015/04/monitor1.jpg" alt="EasyPACS Service Folder Structure">
</li>
<li>Go to conf/wrapper.conf and update your java path
<img src="https://2kere2beseder.files.wordpress.com/2015/04/wrapper_java_command.jpg" alt="Wrapper Java Path">
</li>
<li>Again in conf/wrapper.conf update your jar names along with version number. Here is an example of the wrapper.conf file</li>
</ul>

<p><code>#********************************************************************</code>
<code># Wrapper License Properties (Ignored by Community Edition)</code>
<code>#********************************************************************</code>
<code># Include file problems can be debugged by removing the first '#'</code>
<code>#  from the following line:</code>
<code>##include.debug</code>
<code>#include ../conf/wrapper-license.conf</code>
<code>#include ../conf/wrapper-license-%WRAPPER_HOST_NAME%.conf</code></p>

<p><code>#********************************************************************</code>
<code># Wrapper Java Properties</code>
<code>#********************************************************************</code>
<code># Java Application</code>
<code>wrapper.java.command=C:\Program Files (x86)\Java\jdk1.8.0_45/bin/java</code></p>

<p><code># Java Main class.  This class must implement the WrapperListener interface</code>
<code>#  or guarantee that the WrapperManager class is initialized.  Helper</code>
<code>#  classes are provided to do this for you.  See the Integration section</code>
<code>#  of the documentation for details.</code>
<code>wrapper.java.mainclass=org.tanukisoftware.wrapper.WrapperJarApp</code></p>

<p><code># Java Classpath (include wrapper.jar)  Add class path elements as</code>
<code>#  needed starting from 1</code>
<code>wrapper.java.classpath.1=../lib/wrapper.jar</code>
<code>wrapper.java.classpath.2=easy.pacs-0.0.1-SNAPSHOT.jar</code></p>

<p><code># Java Library Path (location of Wrapper.DLL or libwrapper.so)</code>
<code>wrapper.java.library.path.1=../lib</code></p>

<p><code># Java Additional Parameters</code>
<code>#wrapper.java.additional.1=-Dprogram.name=run.bat</code></p>

<p><code># Initial Java Heap Size (in MB)</code>
<code>#wrapper.java.initmemory=1024</code></p>

<p><code># Maximum Java Heap Size (in MB)</code>
<code>#wrapper.java.maxmemory=2048</code></p>

<p><code># Application parameters.  Add parameters as needed starting from 1</code>
<code>wrapper.app.parameter.1=easy.pacs-0.0.1-SNAPSHOT.jar</code></p>

<p><code>#********************************************************************</code>
<code># Wrapper Logging Properties</code>
<code>#********************************************************************</code>
<code># Format of output for the console.  (See docs for formats)</code>
<code>wrapper.console.format=PM</code></p>

<p><code># Log Level for console output.  (See docs for log levels)</code>
<code>wrapper.console.loglevel=INFO</code></p>

<p><code># Log file to use for wrapper output logging.</code>
<code>wrapper.logfile=../logs/wrapper.log</code></p>

<p><code># Format of output for the log file.  (See docs for formats)</code>
<code>wrapper.logfile.format=LPTM</code></p>

<p><code># Log Level for log file output.  (See docs for log levels)</code>
<code>wrapper.logfile.loglevel=INFO</code></p>

<p><code># Maximum size that the log file will be allowed to grow to before</code>
<code>#  the log is rolled. Size is specified in bytes.  The default value</code>
<code>#  of 0, disables log rolling.  May abbreviate with the 'k' (kb) or</code>
<code>#  'm' (mb) suffix.  For example: 10m = 10 megabytes.</code>
<code>wrapper.logfile.maxsize=10m</code></p>

<p><code># Maximum number of rolled log files which will be allowed before old</code>
<code>#  files are deleted.  The default value of 0 implies no limit.</code>
<code>wrapper.logfile.maxfiles=50</code></p>

<p><code># Log Level for sys/event log output.  (See docs for log levels)</code>
<code>wrapper.syslog.loglevel=ERROR</code></p>

<p><code>#********************************************************************</code>
<code># Wrapper Windows Properties</code>
<code>#********************************************************************</code>
<code># Title to use when running as a console</code>
<code>wrapper.console.title=EasyPACS_001</code></p>

<p><code>#********************************************************************</code>
<code># Wrapper Windows NT/2000/XP Service Properties</code>
<code>#********************************************************************</code>
<code># WARNING - Do not modify any of these properties when an application</code>
<code>#  using this configuration file has been installed as a service.</code>
<code>#  Please uninstall the service before modifying this section.  The</code>
<code>#  service can then be reinstalled.</code></p>

<p><code># Name of the service</code>
<code>wrapper.ntservice.name=EasyPACS_001</code></p>

<p><code># Display name of the service</code>
<code>wrapper.ntservice.displayname=EasyPACS_001</code></p>

<p><code># Description of the service</code>
<code>wrapper.ntservice.description=EasyPACS_001</code></p>

<p><code># Service dependencies.  Add dependencies as needed starting from 1</code>
<code>wrapper.ntservice.dependency.1=</code></p>

<p><code># Mode in which the service is installed.  AUTO_START or DEMAND_START</code>
<code>wrapper.ntservice.starttype=AUTO_START</code></p>

<p><code># Allow the service to interact with the desktop.</code>
<code>wrapper.ntservice.interactive=false</code></p>

<ol>
<li><a href="https://2kere2beseder.files.wordpress.com/2015/04/easy-pacs-0-0-1-snapshot.zip">Download easy-pacs-0-0-1-snapshot.jar</a></li>
<li>Setup your JAVA Environment as explained above</li>
<li>Generate your tables as explained above</li>
<li>
</li>
</ol>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/mehmetsen80/EasyPACS">Easy PACS</a> is maintained by <a href="https://github.com/mehmetsen80">mehmetsen80</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-26578001-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>

